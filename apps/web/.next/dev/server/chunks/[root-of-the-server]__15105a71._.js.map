{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/PC/Desktop/Our_Stocks_Project/apps/web/src/app/api/admin/stats/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport { drizzle } from 'drizzle-orm/neon-http';\nimport { neon } from '@neondatabase/serverless';\nimport { pgTable, serial, text, integer, varchar, timestamp } from 'drizzle-orm/pg-core';\nimport { sql, count } from 'drizzle-orm';\n\nconst users = pgTable('users', {\n  id: serial('id').primaryKey(),\n  status: varchar('status', { length: 255 }).default('active'),\n});\n\nconst products = pgTable('products', {\n  id: serial('id').primaryKey(),\n  quantity: integer('quantity').default(0).notNull(),\n});\n\nconst sqlClient = neon(process.env.DATABASE_URL!);\nconst db = drizzle(sqlClient);\n\nexport const dynamic = 'force-dynamic';\n\nexport async function GET() {\n  try {\n    const [usersCount] = await db.select({ count: count() }).from(users);\n    const [productsCount] = await db.select({ count: count() }).from(products);\n    const [lowStockCount] = await db.select({ count: count() }).from(products).where(sql`quantity < 10`);\n    const [totalQuantity] = await db.select({ total: sql<number>`COALESCE(SUM(quantity), 0)` }).from(products);\n\n    const statsData = {\n      active_users: usersCount?.count || 0,\n      total_products: productsCount?.count || 0,\n      total_quantity: totalQuantity?.total || 0,\n      low_stock_alerts: lowStockCount?.count || 0,\n    };\n\n    return NextResponse.json({ success: true, data: statsData });\n  } catch (error: any) {\n    console.error('Error fetching admin stats:', error);\n    return NextResponse.json({ success: false, error: error.message }, { status: 500 });\n  }\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;;;;;;AAEA,MAAM,QAAQ,IAAA,2QAAO,EAAC,SAAS;IAC7B,IAAI,IAAA,sRAAM,EAAC,MAAM,UAAU;IAC3B,QAAQ,IAAA,wRAAO,EAAC,UAAU;QAAE,QAAQ;IAAI,GAAG,OAAO,CAAC;AACrD;AAEA,MAAM,WAAW,IAAA,2QAAO,EAAC,YAAY;IACnC,IAAI,IAAA,sRAAM,EAAC,MAAM,UAAU;IAC3B,UAAU,IAAA,wRAAO,EAAC,YAAY,OAAO,CAAC,GAAG,OAAO;AAClD;AAEA,MAAM,YAAY,IAAA,yOAAI,EAAC,QAAQ,GAAG,CAAC,YAAY;AAC/C,MAAM,KAAK,IAAA,8QAAO,EAAC;AAEZ,MAAM,UAAU;AAEhB,eAAe;IACpB,IAAI;QACF,MAAM,CAAC,WAAW,GAAG,MAAM,GAAG,MAAM,CAAC;YAAE,OAAO,IAAA,mRAAK;QAAG,GAAG,IAAI,CAAC;QAC9D,MAAM,CAAC,cAAc,GAAG,MAAM,GAAG,MAAM,CAAC;YAAE,OAAO,IAAA,mRAAK;QAAG,GAAG,IAAI,CAAC;QACjE,MAAM,CAAC,cAAc,GAAG,MAAM,GAAG,MAAM,CAAC;YAAE,OAAO,IAAA,mRAAK;QAAG,GAAG,IAAI,CAAC,UAAU,KAAK,CAAC,8PAAG,CAAC,aAAa,CAAC;QACnG,MAAM,CAAC,cAAc,GAAG,MAAM,GAAG,MAAM,CAAC;YAAE,OAAO,8PAAG,AAAQ,CAAC,0BAA0B,CAAC;QAAC,GAAG,IAAI,CAAC;QAEjG,MAAM,YAAY;YAChB,cAAc,YAAY,SAAS;YACnC,gBAAgB,eAAe,SAAS;YACxC,gBAAgB,eAAe,SAAS;YACxC,kBAAkB,eAAe,SAAS;QAC5C;QAEA,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,MAAM;QAAU;IAC5D,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAO,OAAO,MAAM,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACnF;AACF"}}]
}